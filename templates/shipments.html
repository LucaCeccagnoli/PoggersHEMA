{% extends 'navbar.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}


<div id="div-shipments"></div>

<script type="text/javascript">
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "http://127.0.0.1:8000/api/shipment-list");
  xhr.setRequestHeader('Authorization', 'Token '+ String(get_cookie('token')));
  xhr.send();
  xhr.onreadystatechange = function(){
    if(xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200){
      var response =  JSON.parse(xhr.responseText);
      $.each(response, function(i){
        console.log(response[i]);
        printShipments(response[i]);
      })
    }
  }

  function printShipments(item){
      var textId = item["id"];
      var textShipping_address = item["shipping_address"];
      var textDate = item["date"];
      var textOrder = item["order"];


      var myShipment = $(`<div>
        ${textId} - ${textShipping_address} - [${textDate}] - ${textOrder}
        <button>Change Order</button> | <button>Delete Order</button>
      </div>`);
      myShipment.appendTo('#div-shipments');
  }

</script>




{% endblock content %}
